<!DOCTYPE html>
<html>
<head>
    <title>Suppliers</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" href="/img/spring-boot.ico" type="image/x-icon">
    <link rel="stylesheet" href="/webjars/font-awesome/5.15.1/css/all.min.css" />
    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/mdb.min.css" />
    <link rel="stylesheet" href="/css/addons/datatables.min.css" />
    <link rel="stylesheet" href="/css/style.css" />
</head>
<body class="grey lighten-3">


<!--Main Navigation-->
<header>

    <!-- Navbar -->
    <nav class="navbar fixed-top navbar-expand-lg navbar-light white scrolling-navbar">
        <div class="container-fluid">

            <!-- Collapse -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                    aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Links -->
            <div class="collapse navbar-collapse" id="navbarSupportedContent">

                <!-- Left -->
                <!-- Search Bar -->

                <!-- Right -->
                <ul class="navbar-nav nav-flex-icons ml-auto">
                    <li class="nav-item">
                        <a href="#" class="nav-link waves-effect" target="_blank">
                            <i class="fas fa-globe"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link waves-effect" target="_blank">
                            <i class="fas fa-envelope"></i>
                        </a>
                    </li>

                </ul>

                <img src="/img/sample.jpg" alt="thumbnail" class="img-thumbnail" style="width: 52px; height: 52px; border-radius: 50%;">

            </div>

        </div>
    </nav>
    <!-- Navbar -->


    <!-- Sidebar -->
    <div class="sidebar-fixed position-fixed" style="background-color: rgb(29, 40, 44);">

        <div class="text-center" >
            <a href="dashboard" class="logo-wrapper waves-effect" style="padding: 1.5em;">
                <img src="/img/logo.png" class="img-fluid" alt="logo">
            </a>
        </div>

        <!-- th:class="${#fields.hasErrors('firstName')}? 'form-control is-invalid' : 'form-control'" -->

        <div class="list-group list-group-flush bg-transparent">
            <a href="dashboard" class="list-group-item waves-effect active">
                <div class="row">
                    <div class="col col-md-2 text-center"><i class="fas fa-chart-pie mr-3"></i></div>
                    <div class="col col-md-10">Dashboard</div>
                </div>
            </a>


            <a href="/ui/products" class="list-group-item waves-effect list-group-item list-group-item-action waves-effect text-light bg-transparent">
                <div class="row">
                    <div class="col col-md-2 text-center"><i class="fas fa-boxes mr-3"></i></div>
                    <div class="col col-md-10">Products</div>
                </div>
            </a>

            <a href="/ui/customers" class="list-group-item waves-effect list-group-item list-group-item-action waves-effect text-light bg-transparent">
                <div class="row">
                    <div class="col col-md-2 text-center"><i class="fas fa-users mr-3"></i></div>
                    <div class="col col-md-10">Customers</div>
                </div>
            </a>

            <a href="/ui/orders" class="list-group-item waves-effect list-group-item list-group-item-action waves-effect text-light bg-transparent">
                <div class="row">
                    <div class="col col-md-2 text-center"><i class="fas fa-inbox mr-3"></i></div>
                    <div class="col col-md-10">Orders</div>
                </div>
            </a>

            <a href="/ui/carriers" class="list-group-item waves-effect list-group-item list-group-item-action waves-effect text-light bg-transparent">
                <div class="row">
                    <div class="col col-md-2 text-center"><i class="fas fa-ship mr-3"></i></div>
                    <div class="col col-md-10">Carriers</div>
                </div>
            </a>

            <a href="/ui/suppliers" class="list-group-item waves-effect list-group-item list-group-item-action waves-effect text-light bg-transparent">
                <div class="row">
                    <div class="col col-md-2 text-center"><i class="fas fa-bus mr-3"></i></div>
                    <div class="col col-md-10">Suppliers</div>
                </div>
            </a>


        </div>

    </div>
    <!-- Sidebar -->

</header>
<!--Main Navigation-->




<!-- Main layout -->
<main class="py-5 mx-lg-5">

    < class="container-fluid mt-5">

    <!--Grid row-->
    < class="row wow fadeIn">

        <!--Grid column-->
        <div class="col-md-9 mb-4">


            <!--Card-->
            <div class="card">

                <div class="card-header">

                    <br>
                    <!-- Grid row -->
                    <div class="row align-items-center">

                        <!-- Grid column -->
                        <div class="col-auto">
                            <h5 class="heading"><strong>Total Orders</strong></h5>
                        </div>



                    </div>
                    <!-- Grid row -->

                </div>

                <!--Card content-->
                <div class="card-body">

                    <canvas id="myChart"></canvas>


                </div>

            </div>
            <!--/.Card-->
            <div class="card">

                <div class="card-header">

                    <br>
                    <!-- Grid row -->
                    <div class="row align-items-center">

                        <!-- Grid column -->
                        <div class="col-auto">
                            <h5 class="heading"><strong>Total Products</strong></h5>
                        </div>



                    </div>
                    <!-- Grid row -->

                </div>

                <!--Card content-->
                <div class="card-body">

                    <canvas id="myChart1"></canvas>


                </div>

            </div>
        <!--Grid column-->

        <!--Grid column-->
    <!--Grid row-->
    <!--Grid row-->
</div>
</main>
</body>
<footer class="page-footer text-center font-small primary-color-dark darken-2 wow fadeIn">

    <!--Copyright-->
    <div class="footer-copyright py-3">
        Â© 2023 Copyright:
        <a href="https://mosab-khalil.com/" target="_blank"> mosab-khalil.com </a>
    </div>
    <!--/.Copyright-->

</footer>

<script type="text/javascript" src="/js/jquery.min.js"></script>
<script type="text/javascript" src="/js/addons/datatables.min.js"></script>
<script type="text/javascript" src="/js/popper.min.js"></script>
<script type="text/javascript" src="/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/js/mdb.min.js"></script>




<script type="text/javascript">

    function getRandomRGBColor() {
        var r = Math.floor(Math.random() * 256);
        var g = Math.floor(Math.random() * 256);
        var b = Math.floor(Math.random() * 256);
        return `rgb(${r},${g},${b})`;
    }

    $(document).ready(function () {
        let labels = [];
        let orderCount = [];
        let bgs= [];

        fetch(`/api/v1/order/stats`, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(async function(response) {
                if (response.status != 200) {
                    throw new Error("An error occured fetching data");
                }
                return response.json();
            })
            .then(data => {
                data.map((a) => {
                    labels.push(a.orderDate);
                    orderCount.push(a.orderCount);
                    bgs.push(getRandomRGBColor())
                })

                var densityData = {
                    label: '# of Orders',
                    data: orderCount,
                    backgroundColor: bgs,
                    borderColor: bgs,
                };


                var ctx = document.getElementById("myChart").getContext('2d');
                var myChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [densityData]
                    },
                    options: {
                        scales: {
                            yAxes: [{
                                ticks: {
                                    beginAtZero: true
                                }
                            }]
                        }
                    }
                });
            })
            .catch(error => {
                // Handle any errors that occur during the API call
                console.log('Error:', error.message);
                errorElement.innerHTML = error.message;
                errorElement.style.display = "block";
            });


        let labels1 = [];
        let orderCount1 = [];
        let bgs1= [];

        fetch(`/api/v1/product/stats`, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(async function(response) {
                if (response.status != 200) {
                    throw new Error("An error occured fetching data");
                }
                return response.json();
            })
            .then(data => {
                data.map((a) => {
                    labels1.push(a.name);
                    orderCount1.push(a.productCount);
                    bgs1.push(getRandomRGBColor())
                })

                var densityData1 = {
                    label: '# of Quantity',
                    data: orderCount1,
                    backgroundColor: bgs1,
                    borderColor: bgs1,
                };

            


                var ctx = document.getElementById("myChart1").getContext('2d');
                var myChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels1,
                        datasets: [densityData1]
                    },
                    options: {
                        scales: {
                            yAxes: [{
                                ticks: {
                                    beginAtZero: true
                                }
                            }]
                        }
                    }
                });
            })
            .catch(error => {
                // Handle any errors that occur during the API call
                console.log('Error:', error.message);
                errorElement.innerHTML = error.message;
                errorElement.style.display = "block";
            });



    });
</script>
</html>